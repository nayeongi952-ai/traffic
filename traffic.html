<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Realistic 2-Color Traffic Light</title>
<style>
  body {
    background: linear-gradient(#5db2ff, #bfe3ff); /* í•˜ëŠ˜ ë°°ê²½ */
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
  }

  .traffic-container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* ===== ì‹ í˜¸ë“± ë³¸ì²´ ===== */
  .traffic-body {
    width: 160px;
    background: #1b1b1b;
    border-radius: 20px;
    padding: 20px 0;
    box-shadow: 0 0 20px rgba(0,0,0,0.7);
    display: flex;
    flex-direction: column;
    gap: 25px;
  }

  /* ===== ê° ë“± ë°•ìŠ¤ ===== */
  .lamp-box {
    width: 120px;
    height: 120px;
    background: #111;
    border-radius: 50%;
    margin: auto;
    position: relative;
    box-shadow: inset 0 0 25px rgba(0,0,0,0.9);
  }

  /* ë“± ë‚´ë¶€(ë Œì¦ˆ) ìŠ¤íƒ€ì¼ */
  .lamp {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: #333;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: 0.2s;
    background-image: radial-gradient(circle, rgba(255,255,255,0.2), rgba(0,0,0,0.9)),
                      repeating-radial-gradient(circle, transparent, transparent 4px, rgba(0,0,0,0.4) 5px);
  }

  .red.on { background-color: red; box-shadow: 0 0 25px 10px rgba(255,0,0,0.9); }
  .green.on { background-color: #00e000; box-shadow: 0 0 25px 10px rgba(0,255,0,0.9); }

  /* ===== ì‹ í˜¸ë“± í›„ë“œ(ê·¸ëŠ˜ë§‰) ===== */
  .hood {
    width: 140px;
    height: 70px;
    background: #0d0d0d;
    border-radius: 70px 70px 10px 10px;
    position: absolute;
    top: -20px;
    left: -10px;
    z-index: -1;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
  }

  /* ===== ê¸°ë‘¥ ===== */
  .pole {
    width: 35px;
    height: 260px;
    background: #2a2a2a;
    border-radius: 15px;
    margin-top: -5px;  /* ë³¸ì²´ì™€ ë”± ë¶™ê²Œ */
    box-shadow: inset 0 0 10px rgba(0,0,0,0.6);
  }
</style>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyClsKru0-dRRl8ErV5vQx2vS31JFIV_OKM",
  authDomain: "traffic-light-demo-c070a.firebaseapp.com",
  databaseURL: "https://traffic-light-demo-c070a-default-rtdb.firebaseio.com",
  projectId: "traffic-light-demo-c070a",
  storageBucket: "traffic-light-demo-c070a.firebasestorage.app",
  messagingSenderId: "272853805092",
  appId: "1:272853805092:web:e95b87c470419a90d290b1",
  measurementId: "G-ZHQXT1WE0F"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* === í‘œì‹œ ëª¨ë“œ === */
function displayMode() {
  db.ref("traffic").on("value", snap => {
    let state = snap.val();
    document.getElementById("red").classList.toggle("on", state === "red");
    document.getElementById("green").classList.toggle("on", state === "green");
  });
}

/* === ì œì–´ ëª¨ë“œ === */
function controlMode() {
  document.getElementById("btnRed").onclick = () => db.ref("traffic").set("red");
  document.getElementById("btnGreen").onclick = () => db.ref("traffic").set("green");
}

window.onload = () => {
  const mode = new URLSearchParams(window.location.search).get("mode");
  if (mode === "display") displayMode();
  if (mode === "control") controlMode();
};
</script>
</head>
<body>

<!-- ================= í‘œì‹œ í™”ë©´ ================= -->
<div class="traffic-container" id="display" style="display:none;">
  <div class="traffic-body">
    <div class="lamp-box">
      <div class="hood"></div>
      <div class="lamp red" id="red"></div>
    </div>
    <div class="lamp-box">
      <div class="hood"></div>
      <div class="lamp green" id="green"></div>
    </div>
  </div>

  <div class="pole"></div>
</div>

<!-- ================= ì œì–´ í™”ë©´ ================= -->
<div id="control" style="display:none; text-align:center;">
  <button id="btnRed" style="font-size:30px;padding:20px;margin:20px;background:#ff4d4d;color:white;border:none;border-radius:10px;">ğŸ”´ ë¹¨ê°„ë¶ˆ</button>
  <button id="btnGreen" style="font-size:30px;padding:20px;margin:20px;background:#00cc44;color:white;border:none;border-radius:10px;">ğŸŸ¢ ì´ˆë¡ë¶ˆ</button>
</div>

<script>
const mode = new URLSearchParams(window.location.search).get("mode");
document.getElementById("display").style.display = mode === "display" ? "flex" : "none";
document.getElementById("control").style.display = mode === "control" ? "block" : "none";
</script>

</body>
</html>
